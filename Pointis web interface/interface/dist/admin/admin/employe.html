<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>POINTIS</title>
    <!-- Favicon icon -->
    <link rel="icon" type="image/png" sizes="16x16" href="#">
    <!-- Custom Stylesheet -->
    <link href="../css/style.css" rel="stylesheet">

</head>
<script>


    function ajouter() {

        var a = document.getElementById("Sexe");
        var valeurselectionnee = a.options[a.selectedIndex].value;
        var textselectionne = a.options[a.selectedIndex].text;

        var selectElmt = document.getElementById("Titre");
        var valeurselectionnee = selectElmt.options[selectElmt.selectedIndex].value;
        var text = selectElmt.options[selectElmt.selectedIndex].text;

        //var a = document.getElementById("SocieteID");
        //var valeurselectionnee = a.options[a.selectedIndex].value;
        // var textselectionne = a.options[a.selectedIndex].text;
        // var qr=document.getElementById(".qrious");

        /*   var comboBox = document.getElementById("SocieteID");
           var selectedOption = comboBox.options[comboBox.selectedIndex];
           var selectedId = selectedOption.getAttribute("attr.data-value");*/

        var combo = document.getElementById("equipe");
        var selected = combo.options[combo.selectedIndex];
        var selectedId = selected.getAttribute("attr.data-value");

        //var form = document.querySelector('form');
        //var data = new FormData(form);
        /*var comboBox = document.getElementById("Sexe");
        var cmb = document.getElementById("Sexe").value;
        var selectedOption = comboBox.options[comboBox.selectedOption];
       */
        let z = sessionStorage.getItem("u");
        console.log(z);
        var t = document.getElementById("Nom").value;
        var d = document.getElementById("Prenom").value;
        var turn = document.getElementById("Email").value;
        var p = document.getElementById("Telephone").value;
        //  var r = document.getElementById("SocieteID").value;
        var l = document.getElementById("Matricule").value;

        var data = {

            EquipeID: parseInt(selectedId),
            Nom: t,
            Prenom: d,
            Email: turn,
            Telephone: p,
            Sexe: textselectionne,
            Titre: text,
            Matricule: l,
            SocieteID: parseInt(z)


        }

        console.log(data);
        if (t != '' && selectedId != 0) {
            fetch('https://face.activactions.net/api/Employes/Post', {
                method: 'POST',
                headers: {
                    'content-type': 'application/json'
                },
                body: JSON.stringify(data)
            });
            alert("Enregistrement reussi !");
            location.replace('./affichageenregi.html');
        }
    }

</script>

<body>

    <!--*******************
        Preloader start
    ********************-->
    <div id="preloader">
        <div class="loader">
            <svg class="circular" viewBox="25 25 50 50">
                <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="3" stroke-miterlimit="10" />
            </svg>
        </div>
    </div>
    <!--*******************
        Preloader end
    ********************-->


    <!--**********************************
        Main wrapper start
    ***********************************-->
    <div id="main-wrapper">

        <!--**********************************
            Nav header start
        ***********************************-->
        
        <!--**********************************
            Nav header end
        ***********************************-->

        <!--**********************************
            Header start
        ***********************************-->
        
        <!--**********************************
            Header end ti-comment-alt
        ***********************************-->

        <!--**********************************
            Sidebar start
        ***********************************-->
        
        <!--**********************************
            Sidebar end
        ***********************************-->

        <!--**********************************
            Content body start
        ***********************************-->
        <div class="content-body m-auto w-75">

            <div class="row page-titles mx-0 bg-light">
                <div class="col p-md-0">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a class="" href="../../index.html"function="javascript:void()" >Accueil</a></li>
                        <li class="breadcrumb-item active"><a class="" href=""function="javascript:void()" >Enregistrement</a></li>
                    </ol>
                </div>
            </div>
            <!-- row -->

            <div class="container-fluid">
                <div class="row justify-content-center">
                    <div class="col-lg-12">
                        <div class="card">
                            <div class="card-body">
                                <div class="form-validation">
                                    <form class="form-valide" action="#" method="post" id="formulaire"
                                        name="formulaire">
                                        <div class="form-group row">
                                            <div class="col-lg-6 ml-auto  text-right">

                                                <input type="button" id="envoyer" onclick="ajouter();"
                                                    class="btn btn-primary" value="Envoyer" />

                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group row">
                                                    <label class="col-sm-3 col-form-label">Nom</label>
                                                    <div class="col-sm-9">
                                                        <input type="text" class="form-control" id="Nom" name="Nom"
                                                            placeholder="Nom">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group row">
                                                    <label class="col-sm-3 col-form-label">Prenom</label>
                                                    <div class="col-sm-9">
                                                        <input type="text" class="form-control" id="Prenom"
                                                            name="Prenom" placeholder="">
                                                    </div>
                                                </div>
                                            </div>


                                        </div>

                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group row">
                                                    <label class="col-sm-3 col-form-label">Adresse mail</label>
                                                    <div class="col-sm-9">
                                                        <input type="text" class="form-control" id="Email" name="Email"
                                                            placeholder=""">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class=" col-md-6">
                                                        <div class="form-group row">
                                                            <label class="col-sm-3 col-form-label">Telephone</label>
                                                            <div class="col-sm-9">
                                                                <input type="text" class="form-control" id="Telephone"
                                                                    name="Telephone" placeholder="+225-0709-7886-67">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group row">
                                                            <label class="col-sm-3 col-form-label">Sexe</label>
                                                            <div class="col-sm-9">
                                                                <select class="form-control" id="Sexe" name="Sexe"
                                                                    placeholder="Choisissez un genre">
                                                                    <option value="">Masculin</option>
                                                                    <option value="">Feminin</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group row">
                                                            <label class="col-sm-3 col-form-label">Titre</label>
                                                            <div class="col-sm-9">
                                                                <select class="form-control" id="Titre" name="Titre"
                                                                    placeholder="Choisissez un titre">

                                                                    <option value="">D.G</option>
                                                                    <option value="">DRH</option>
                                                                    <option value="">S.G</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group row">
                                                            <label class="col-sm-3 col-form-label">Equipe</label>
                                                            <div class="col-sm-9">
                                                                <select class="form-control" id="equipe" name="equipe"
                                                                    placeholder="Choisissez un titre">

                                                                    <script type="text/javascript">
                                                                        let donnees = '';
                                                                        fetch('https://face.activactions.net/api/EquipeTravail/Get')
                                                                            .then(res => res.json())
                                                                            .then(data => {
                                                                                for (let item of data) {
                                                                                    donnees += `<option attr.data-value=${item.ID}>${item.Title}</option>`
                                                                                }
                                                                                document.getElementById('equipe').innerHTML = donnees;
                                                                            })
                                                                    </script>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group row">
                                                            <label class="col-sm-3 col-form-label">Matricule</label>
                                                            <div class="col-sm-9">
                                                                <input type="text" class="form-control" id="Matricule"
                                                                    name="Matricule" placeholder="+225-0709-7886-67">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>


                                            </div>




                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- #/ container -->

            <!--**********************************
            Footer start
        ***********************************
        <div class="footer">
            <div class="copyright">
                <p>Copyright &copy; Designed & Developed by <a href="https://themeforest.net/user/quixlab">Quixlab</a> 2018</p>
            </div>
        </div>-->
            <!--**********************************
            Footer end
        ***********************************-->
        </div>
        <!--**********************************
        Main wrapper end
    ***********************************-->

        <!--**********************************
        Scripts
    ***********************************-->
        <script src="../plugins/common/common.min.js"></script>
        <script src="../js/custom.min.js"></script>
        <script src="../js/settings.js"></script>
        <script src="../js/gleek.js"></script>
        <script src="../js/styleSwitcher.js"></script>
        <script src="../plugins/validation/jquery.validate.min.js"></script>
        <script src="../plugins/validation/jquery.validate-init.js"></script>
        <!--**********************************
        Main wrapper end
    ***********************************  <script src="jquery/jquery.js"></script>
    <script src="jquery/jquery.min.js"></script>-->
</body>

</html>